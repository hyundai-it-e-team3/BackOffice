<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<th:block th:replace="~{common/layout::setContent(~{this::content})}">
  <th:block th:fragment="content">
    <script th:inline="javascript">
			  function selectDropDownInput(event,id){
					inputBox = document.querySelector(id);
					inputText = event.target.innerHTML;
					console.log(inputText);
					inputBox.value = inputText;
			  }
			    function fnModuleInfo(){
			    	   $('#detailModal .modal-content').load("./detailModal");
			    	   $('#detailModal').modal();
			    }
			    
			      let mainIndex = 0;
			      let middleIndex = 0;
			      let subIndex = 0;
			      
			      function selectDropDownBtn(event,id,index){
			        inputBox = document.querySelector(id);
			        console.log([[${categoryList}]][index]);
			        mainIndex = index;
			        let categoryList = [[${categoryList}]][mainIndex].categoryList;
			        console.log(categoryList);
			        $('#middleGbn').html("");
			        $('#subGbn').html("");
			        for(let i = 0; i < categoryList.length; i++){
			        	var $temp = $(`<a class="dropdown-item" onclick="javascript:selectDropDownBtnGbn2(event,'#stockGbn2',${i})">${categoryList[i].name}</a>`);
			            $('#middleGbn').append($temp);
			        }
			        inputText = event.target.innerHTML;
			        inputBox.innerHTML = inputText;
			      }
			      
			      function selectDropDownBtnGbn2(event,id,index){
			          inputBox = document.querySelector(id);
			          middleIndex = index;
			          let categoryList = [[${categoryList}]][mainIndex].categoryList[middleIndex].categoryList;
			          console.log(categoryList);
			          $('#subGbn').html("");
			          for(let i = 0; i < categoryList.length; i++){
			        	var $temp = $(`<a class="dropdown-item" onclick="javascript:selectDropDownBtnGbn3(event,'#stockGbn3',${i})">${categoryList[i].name}</a>`);
			          	$('#subGbn').append($temp);
			          }
			          inputText = event.target.innerHTML;
			          inputBox.innerHTML = inputText;
			        }
			      function selectDropDownBtnGbn3(event,id,index){
			          inputBox = document.querySelector(id);
			          subIndex = index;
			          let category = [[${categoryList}]][mainIndex].categoryList[middleIndex].categoryList[subIndex];
			          console.log(category);
			          inputText = event.target.innerHTML;
			          inputBox.innerHTML = inputText;
			        }
			      $(function(){
			    	let categoryList = [[${categoryList}]];
					console.log(categoryList);
					//let categoryList = [[${categoryList}]];
					console.log("-------");
			      }); 
	</script>
	<style>
		.status {
		    font-size: 50px;
		    margin: 2px 2px 0 0;
		    display: inline-block;
		    vertical-align: middle;
		    line-height: 10px;
		   	height:20px;
		}
		
	</style>
    <div>
      <h4>
        <b>상품 검색</b>
      </h4>
      <table class="table p-0 m-0" style="width: 100%;">
        <colgroup>
          <col style="width: 10%" />
          <col style="width: 45%" />
          <col style="width: 45%" />
        </colgroup>
        <tr class="align-middle">
          <th>검색 분류</th>
          <td colspan="2" class="p-0">
            <div class="input-group mt-1">
              <div class="input-group-prepend">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="productSearchType" data-toggle="dropdown" aria-expanded="false">
                  Dropdown
                </button>
                <div class="dropdown-menu">
                  <a class="dropdown-item" onclick="javascript:selectDropDownBtn(event,'#productSearchType')">상품코드</a>
                  <a class="dropdown-item" onclick="javascript:selectDropDownBtn(event,'#productSearchType')">상품명</a>
                  <a class="dropdown-item" onclick="javascript:selectDropDownBtn(event,'#productSearchType')">브랜드명</a>
                </div>
              </div>
              <input type="text" class="form-control">
            </div>
          </td>
        </tr>
        <tr class="align-middle">
          <th>카테고리</th>
          <td colspan="2" class="align-middle p-0">
            <div class="input-group mt-1">
              <div class="input-group-prepend ">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="stockGbn1" data-toggle="dropdown" aria-expanded="false">
                  대분류
                </button>
                <div class="dropdown-menu" >
                  <a th:each="category, status: ${categoryList}" class="dropdown-item" th:onclick="javascript:selectDropDownBtn(event,'#stockGbn1',[[${status.index}]])">[[${category.name}]]</a>
                </div>
              </div>
              <div class="input-group-prepend">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="stockGbn2" data-toggle="dropdown" aria-expanded="false">
                  중분류
                </button>
                <div class="dropdown-menu" id="middleGbn">
                </div>
              </div>
              <div class="input-group-prepend">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="stockGbn3" data-toggle="dropdown" aria-expanded="false">
                  소분류
                </button>
                <div class="dropdown-menu" id="subGbn">
                </div>
              </div>
            </div>
          </td>
        </tr>
        <tr>
          <th class="align-middle">상품등록일</th>
          <td class="pl-0 pt-1 pb-1">
            <input type="date" class="form-control" name="date" required="required">
          </td>
          <td class="pl-0 pt-1 pb-1">
            <input type="date" class="form-control" name="date" required="required">
          </td>
        </tr>
        <tr>
          <tr>
          <th scope="row" class="align-middle">진행 여부</th>
          <td colspan="2">
            <span>
              <input class="align-middle" type="checkbox" id="productProgressStatusCheckbox1" value="inProgress">
              <label class="align-middle mb-0 ">진행 중</label>
            </span>
            <span>
              <input class="align-middle ml-2" type="checkbox" id="productProgressStatusCheckbox2" value="notInProgress"> 
              <label class="align-middle mb-0">진행 안함</label>
            </span>
          </td>
        </tr>
        <tr>
            <td colspan="3">
              <input type="button" class="btn btn-success float-right" value="검색" />
            </td>
          </tr>
      </table>
    </div>

    <h4>상품 목록</h4>

    <table class="table table-sm table-bordered">
      <thead class="align-middle text-center">
        <tr>
          <th scope="col"><input type="checkbox"></th>
          <th scope="col">카테고리</th>
          <th scope="col">상품코드</th>
          <th scope="col">상품명</th>
          <th scope="col">진열 상태</th>
          <th scope="col">판매가</th>
          <th scope="col">상품 등록일</th>
          <th scope="col">조회수 대비 구매율</th>
        </tr>
      </thead>
      <tbody class="align-middle text-center">
        <tr>
          <td><input type="checkbox"></td>
          <td>여성<i class="bi bi-caret-right-fill"></i>상의<i class="bi bi-caret-right-fill"></i>가디건</td>
          <td><a class="text-warning" th:href="@{/product/detail}">CM2B0KJC210W_OW</a></td>
          <td>벨티드 니트 가디건</td>
          <td><span class="status text-success">&bull;</span>진열중</td>
          <td>354,000</td>
          <td>2021-11-21</td>
          <td class="align-middle">
			<div class="progress">
			  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
			</div>
          </td>
        </tr>
        <tr style="text-align: center; vertical-align: middle">
          <td><input type="checkbox"></td>
          <td>여성<i class="bi bi-caret-right-fill"></i>상의<i class="bi bi-caret-right-fill"></i>가디건</td>
          <td><a class="text-warning" onclick="fnModuleInfo()">CM2B0KJC210W_BK</a></td>
          <td>벨티드 니트 가디건</td>
          <td><span class="status text-danger">&bull;</span>진열안됨</td>
          <td>354,000</td>
          <td>2021-11-21</td>
          <td class="align-middle">
			<div class="progress">
			  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
			</div>
          </td>
        </tr>
      </tbody>
    </table>
  	<div class="modal fade" id="detailModal" tabindex="-1" role="dialog" aria-labelledby="historyModalLabel" aria-hidden="true">
	  <div class="modal-dialog modal-lg">
	    <div class="modal-content">
	    </div>
	  </div>
	</div>
  </th:block>
</th:block>
</html>