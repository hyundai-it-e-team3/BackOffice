<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">	
<th:block th:replace="~{common/layout::setContent(~{this::content})}">
<th:block th:fragment="content">
	<script src="https://d3js.org/d3.v4.min.js"></script>
  	<script src= "https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.js"></script>
  	<link rel="stylesheet" href= "https://cdn.jsdelivr.net/npm/billboard.js/dist/billboard.min.css"/>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.1/Chart.min.js"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.2.2/Chart.min.js"></script>
 	<script src="https://cdn.jsdelivr.net/npm/chart.js@3.6.0/dist/chart.min.js"></script>
 	
	<table style="width :100%;">
		<colgroup>
			<col style="width: 33%"/>
			<col style="width: 33%"/>
			<col style="width: 33%"/>
		</colgroup>
		<tr>
			<td colspan="2" >
				<div class="container">
					<h4>분기별 그래프</h4>
			      <div>
			        <canvas id="quaterChart"></canvas>
			      </div>
			    </div>
			    
   				<script th:inline="javascript">
				    let qlabels = [[${quater.labels}]];
				    
				    var quaterLabels = [];
				    for(let i=0; i<qlabels.length; i++) {
				    	quaterLabels.push(String(qlabels[i]));
				    }
		    	</script>
			    
			    <script>
				    var ctx = document.getElementById("quaterChart").getContext("2d");
				    var quaterChart = new Chart(ctx, {
				      type: "line",
				      data: {
				        labels: quaterLabels,
				        datasets: [
				          {
				            label: "매출액",
				            data: [[${quater.data}]],
				            backgroundColor: "rgba(0,150,136,0.5)",
				          },
				        ],
				      },
				    });
				  </script>
			</td>
			<td style="vertical-align:middle">
				<!-- 전분기 대비 판매 상승률 -->
				<div class="card" style="text-align:center; vertical-align:middle; height:100%">
					<h4>작년 동분기 대비 매출 상승률</h4>
					<h1>[[${quater.lastYear}]]%</h1> 
				</div>
				<div class="card mt-2" style="text-align:center; vertical-align:middle; height:100%">
					<h4>전 분기 대비 상승률</h4>
					<h1>[[${quater.lastQuater}]]%</h1> 
				</div>
				<div class="card mt-2" style="text-align:center; vertical-align:middle; height:100%">
					<h4>이번 분기 매출</h4>
					<h1>[[${quater.data[7]}]]억원</h1> 
				</div>
			</td>
		</tr>
		
		
		<tr>
			<td colspan="2">
				<!-- 일별 매출 그래프 -->
				<div class="container">
				<h4>일별 그래프</h4>
				<canvas id="weekChart"></canvas>
				</div>
				
				
				<script th:inline="javascript">
				    let dlabels = [[${daily.labels}]];
				    
				    var dailyLabels = [];
				    for(let i=0; i<dlabels.length; i++) {
				    	dailyLabels.push(String(dlabels[i]));
				    }
		    	</script>
				
				
				<script>
				  var ctx = document.getElementById('weekChart').getContext('2d');
			        var chart = new Chart(ctx, {
			            // type : 'bar' = 막대차트를 의미합니다.
			            type: 'bar', // 
			            data: {
			                labels: dailyLabels,
			                datasets: [{
			                    label: '일간 매출액',
			                    backgroundColor: 'rgb(255, 99, 132)',
			                    borderColor: 'rgb(255, 99, 132)',
			                    data: [[${daily.data}]]
			                }]
			            },
			        });
				</script>
				
			</td>
			<td>
				<!-- 브랜드별 매출 비교 파이 그래프 -->
				<div class="col-xs-12 text-center">
			      <h2>브랜드별 매출</h2>
			    </div>
			  
			    <div id="brand-chart"></div>
			  
		      <script th:inline="javascript">
				    let labels = [[${brand.labels}]];
				    let data = [[${brand.data}]];
				    
				    var brandData = [];
				    var temp;
				    for(let i=0; i<labels.length; i++) {
				    	temp = [];
				    	temp.push(String(labels[i]));
				    	temp.push(data[i]);
				    	brandData.push(temp);
				    }
		    	</script>
		    	
			    <script>
			      var brandChart = bb.generate({
			        data: {
			          columns: brandData,
			          type: "donut",
			          onclick: function (d, i) {
			            console.log("onclick", d, i);
			          },
			          onover: function (d, i) {
			            console.log("onover", d, i);
			          },
			          onout: function (d, i) {
			            console.log("onout", d, i);
			          },
			        },
			        donut: {
			          title: "70",
			        },
			        bindto: "#brand-chart",
			      });
			    </script>
			</td>
		</tr>
		
		<tr>
			<td colspan="2">
				<!-- 연령별 남녀 고객 수 그래프 -->
				<div class="container">
				<h4>고객 현황</h4>
				<canvas id="memberChart"></canvas>
				</div>
				
				<script th:inline="javascript">
				  var memberChart = document.getElementById('memberChart').getContext('2d');
			        var chart = new Chart(memberChart, {
			            // type : 'bar' = 막대차트를 의미합니다.
			            type: 'bar', // 
			            data: {
			          labels: ['10대', '20대', '30대', '40대', '50대', '60대이상'], // 큰 분류(하단 데이터 이름)
			                datasets: [
			                  {
			                    label: '여성', //작은 분류
			                    backgroundColor: [
			                      'red',
			                    ],
			                    borderColor: 'rgb(255, 99, 132)',
			                    data: [[${member.womenList}]]
			                },
			                  {
			                    label: '남성', //작은 분류
			                    backgroundColor: [
			                      'blue',
			                    ],
			                    borderColor: 'rgb(255, 99, 132)',
			                    data: [[${member.menList}]]
			                },
			                  {
			                    label: '전체', //작은 분류
			                    backgroundColor: [
			                      'green',
			                    ],
			                    borderColor: 'rgb(255, 99, 132)',
			                    data: [[${member.totalList}]]
			                },
			                  
			                
			                ]
			            },
			        });
				
				</script>
			</td>
			<td>
				<!-- 외부 유입 경로 파이 그래프 -->
				<div class="col-xs-12 text-center">
			      <h2>외부 유입 경로</h2>
			    </div>
			  
			    <div id="link-chart"></div>
			  
			    <script>
			      var linkChart = bb.generate({
			        data: {
			          columns: [
			            ["가", 55],
			            ["나", 32],
			            ["다", 12],
			            ["라", 23]
			          ],
			          type: "donut",
			          onclick: function (d, i) {
			            console.log("onclick", d, i);
			          },
			          onover: function (d, i) {
			            console.log("onover", d, i);
			          },
			          onout: function (d, i) {
			            console.log("onout", d, i);
			          },
			        },
			        donut: {
			          title: "70",
			        },
			        bindto: "#link-chart",
			      });
			    </script>
			</td>
			
		</tr>
	
	
	
	</table>

	
</th:block>
</th:block>
</html>